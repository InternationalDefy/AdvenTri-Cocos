今天先依据ProcessOn上的设计构建Player类

M_pCtrl类由SD_pCtrl构建 SD_pCtrl继承自SD_item

设计思路 由于PCtrl是可以通过升级改变属性的，所以，每个等级的PCTRL应该在一个table中存现，故需要DB_pctrl

另DB_pctrl的设计：
移动速度 转角速度？（直接转过去？） ！table中需要设计因为这样可以在数据调整时方便，射击速度？！No当作一种技能在skill中实现

Controller类除player之外的实现方法均是用Controler类创建，但是这个Controller类应该时逻辑单元而非数据单元，所以此处，M_pCtrl改用SD创建

另：ControllerSystem系统进行改动，将通常Controller类与PlayerController类分离，因为Controller类中有行为而PlayerController仅仅是数据

经过测试，M_pCtrl类的数据类和构造方法已经完成，其运行方法牵扯到事件监听，

考虑：controller类和listener类的关系
两者都需要监视复杂的事件信息，都需要注册listener
controller和listener都可以注册listenerKey或者ListenerMouse，但是所用目的不同，处理问题元不同！

*****************
以上为3日日志
*****************

重新考察了Controller类，数据部分和模型部分的分离不够彻底，准确的说是Controller自身的创建都需要使用SD，而非直接由SD创建出Controller类的实例，这个问题目前看来没有必要去解决，但是需要记住并注意，M_pCtrl类则需要重新以SD创建的形式构建。

Controller类有一个巨大的问题：Active和set是同步的，这个问题的解决方案：将Active和Set分离成两个函数。它们存在调用的问题：
1：何时调用？2：如何调用？3：由谁调用？
1：激活控制器时调用，可以时实体创建的那一刻，也可以是触发事件或者脚本触发调用
2：通过函数setActive()
3：实体？控制器？
由实体访问控制器的Active操作。现在对实体添加Controller使用SetController操作，控制使用ActiveController操作

目前先使用这个缝补方案，Entity类似乎需要一定程度和数据类解耦。

通过实验，发现所有的EventDispatcher使用的是一个，所以可以直接注册，为所欲为。

下午考虑的问题，利用WindowsAPI添加左右键监听。
楼上放屁！
经过实验，发现可以其实cocos有对右键的响应，使用event->getMouseButton（可以返回其值），0左1右，也有宏可以方便调换。

现在发现的巨大问题是：控制器系统可能要重写！

1：Controller类没有足够的对其他外部变化响应的回调函数。
2：M_pCtrl的方法不能再Controller作为父类的setController，ActiveController方法中使用。
3：delay->update的方法很难适应所有的Entity

1：基类里添加注册方法，派生类实现注册方法，可以响应外部变化的回调
2：基类中注册没有任何行为的虚函数即可
3：值得思考的问题，亟待改进，解决方案有
（1）分离delay->update（active）与创建控制器的操作
（2+）没想出来  /  。\

基本实现按键监听，问题有2：
1：key目前没用
2：按钮会swallow mouse event 的 down 操作
感悟：UI以后要自己写不能用它的menu？&&开启菜单层时要注意对listener的disable
1楼2楼傻逼！
1：没有开按键监听的函数
2：没有swallow
感悟：还行，反正UI层也打算手撸。

现已实现按键监听，注意key值和mouse值设计，晚上做回调函数。

着手于对不同key的回调设计，想法有以下几点
1：注意对不同操作的分离，一个函数体应当只有对一种情况的一段操作的函数
2：为了实现以上目的，可以使用多个辅助类来割裂其操作，在一个函数体内书写则要注意对情况的命令模式分离
3：很有必要创建一个Map来记录按键情况，但是，bool值又不支持，
可以想到的两个解决方案：1：bool字符数组，表示其关系，2：Mapstring对类，类只含bool

转到CC EventKeyboard的源代码，似乎可以对其按键情况进行监听。

发现把KeyCode里的Class去掉 可以使代码得以使用bool数组，实现按键情况监听，似乎仍可以实现其功能，其它问题未知，先这样做，并记录。

修改结束，明天做回调函数。